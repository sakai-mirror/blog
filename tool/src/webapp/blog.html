<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  
      xmlns="http://www.w3.org/1999/xhtml"  
      xml:lang="en"  
      lang="en">
<head>
<script type="text/javascript" src="/library/js/jquery/jquery-ui/js/jquery.js"></script>
<script type="text/javascript" src="/library/js/jquery/jquery-ui/js/jquery-ui.js"></script>
<script type="text/javascript" src="lib/trimpath.js"></script>
<script type="text/javascript" src="lib/jquery.localisation.js"></script>
<script type="text/javascript" src="lib/jquery.cluetip.js"></script>
<script type="text/javascript" src="lib/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="lib/jquery.tablesorter.pager.js"></script>
<script type="text/javascript" src="lib/jquery.form.js"></script>
<script type="text/javascript" src="/library/editor/FCKeditor/fckeditor.js"></script>
<script type="text/javascript" src="js/blog_utils.js"></script>
<script type="text/javascript" src="js/blog_permissions.js"></script>
<script type="text/javascript" src="/library/js/headscripts.js"></script>
<link rel="stylesheet" type="text/css" href="/library/skin/tool_base.css" />
<link rel="stylesheet" type="text/css" href="/library/skin/default/tool.css" />
<link rel="stylesheet" type="text/css" href="css/blog.css" />
<link rel="stylesheet" type="text/css" href="/library/js/jquery/jquery-ui/css/smoothness/jquery-ui.css" />

<script type="text/javascript" language="JavaScript">
var arg = BlogUtils.getParameters();
if(arg['language'])
{
	$.localise('blog-translations',{language:arg['language'],loadBase: true});
}
else
	$.localise('blog-translations');
</script>
</head>
<body>

<div id="blog_toolbar"></div>

<div id="blogMainContainer">
	<div id="blog_content"></div>
</div>

<!--  Templates Start -->

<div id="blog_toolbar_template"><!--
<div style="overflow: hidden;" class="navIntraTool">
	<div id="blog_toolbar_items">
		<a id="blog_home_link" title="${blog_home_tooltip}" href="javascript:;">${blog_home_label}</a>
		<a id="blog_view_authors_link" title="${blog_view_members_tooltip}" href="javascript:;">${blog_view_members_label}</a>
		<a id="blog_my_blog_link" title="${blog_my_blog_tooltip}" href="javascript:;">${blog_my_blog_label}</a>
		<a style="display: none;" id="blog_create_post_link" title="${blog_create_post_tooltip}" href="javascript:;">${blog_create_post_label}</a>
		<a id="blog_permissions_link" title="${blog_permissions_tooltip}" href="javascript:;">${blog_permissions_label}</a>
		<a id="blog_preferences_link" title="${blog_preferences_tooltip}" href="javascript:;">${blog_preferences_label}</a>
		<a id="blog_recycle_bin_link" title="${blog_recycle_bin_tooltip}" href="javascript:;">${blog_recycle_bin_label}</a>
	</div>
</div>
-->
</div>

<div id="blog_permissions_content_template" style="display:none"><!--
<h2>${blog_permissions_label}</h2>
<table id="blog_permissions_table">
	<thead>
		<tr>
			<th></th>
			<th width="5px"></th>
			<th align="center" colspan="6">${blog_post_label}</th>
			<th width="5px"></th>
			<th colspan="6">${blog_comment_label}</th>
		</tr>
		<tr class="listHier">
			<th align="left">Role</th>
			<th style="background: white;border: none;"></th>
			<th style="text-align:center;">create</th>
			<th style="text-align:center;">read.any</th>
			<th style="text-align:center;">update.any</th>
			<th style="text-align:center;">update.own</th>
			<th style="text-align:center;">delete.any</th>
			<th style="text-align:center;">delete.own</th>
			<th style="background: white;border: none;"></th>
			<th style="text-align:center;">create</th>
			<th style="text-align:center;">read.any</th>
			<th style="text-align:center;">update.any</th>
			<th style="text-align:center;">update.own</th>
			<th style="text-align:center;">delete.any</th>
			<th style="text-align:center;">delete.own</th>
		</tr>
	</thead>
<tbody>
{for p in perms}
<tr>
	<td align="left">${p.role}</td>
	<td></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_post_create}checked="checked"{/if}" id="${p.role}:blog.post.create"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_post_read_any}checked="checked"{/if}" id="${p.role}:blog.post.read.any"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_post_update_any}checked="checked"{/if}" id="${p.role}:blog.post.update.any"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_post_update_own}checked="checked"{/if}" id="${p.role}:blog.post.update.own"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_post_delete_any}checked="checked"{/if}" id="${p.role}:blog.post.delete.any"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_post_delete_own}checked="checked"{/if}" id="${p.role}:blog.post.delete.own"/></td>
	<td></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_comment_create}checked="checked"{/if}" id="${p.role}:blog.comment.create"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_comment_read_any}checked="checked"{/if}" id="${p.role}:blog.comment.read.any"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_comment_update_any}checked="checked"{/if}" id="${p.role}:blog.comment.update.any"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_comment_update_own}checked="checked"{/if}" id="${p.role}:blog.comment.update.own"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_comment_delete_any}checked="checked"{/if}" id="${p.role}:blog.comment.delete.any"/></td>
	<td align="center"><input type="checkbox" class="blog_permission_checkbox" {if p.blog_comment_delete_own}checked="checked"{/if}" id="${p.role}:blog.comment.delete.own"/></td>
</tr>
{/for}
</tbody>
</table>
<input id="blog_permissions_save_button" type="button" value="${save}"/>
<input type="button" value="${cancel}" onclick="return switchState('home');"/>
-->
</div>

<div id="blog_create_post_template" style="display:none"><!--
	<h2>${blog_post_editor_label}</h2>

	<div style="height: 20px;"></div>

	<table cols="2">
	<tbody>
	<tr>
	<td><span style="font-weight: bold;">${blog_title_label}</span></td>
	<td><input type="text" id="blog_title_field" name="title" value="${title}"/></td>
	</tr>
	</tbody>
	</table>
   	<br />
	<span style="font-weight: bold;">${blog_content_label}</span>
	<br />
	<textarea name="content" id="blog_content_editor">${content}</textarea>
	<br />
	<br />
	<input type="checkbox" id="blog_commentable_checkbox" {if commentable}checked="checked"{/if}/>${blog_allow_comments_label}
	<br />
	<br />
    <input id="blog_post_id_field" type="hidden" value="${id}"/>
    <input id="blog_publish_post_button" type="button" value="Publish" title="Publishing will make this post visible to others"/>
    <input id="blog_save_post_button" type="button" value="Save as Draft" title="Saving as Draft will save your changes but will not make those changes visible to others"/>
    <input id="blog_cancel_button" type="button" value="Cancel"/>
-->
</div>

<div id="blog_create_comment_template" style="display:none"><!--
	<div id="blog_post_${postId}" style="width:100%"></div>

	<h3>Add your comment:</h3>

	<div style="height: 20px;"></div>

	<textarea name="text" id="blog_content_editor">${content}</textarea>
	<br />
	<br />
    <input id="blog_comment_id_field" type="hidden" value="${id}"/>
    <input id="blog_save_comment_button" type="button" value="${save}"/>
    <input type="button" value="${cancel}" onclick="switchState('viewAllPosts');"/>
-->
</div>

<div id="blog_authors_content_template" style="display:none"><!--
	<h2>${blog_authors_label}</h2>
	<div id="blogBloggerPager">
	<form>
		<img class="first" src="/library/image/silk/control_start_blue.png"/>
		<img class="prev" src="/library/image/silk/control_rewind_blue.png"/>
		<input class="pagedisplay" type="text"/>
		<img class="next" src="/library/image/silk/control_fastforward_blue.png"/>
		<img class="last" src="/library/image/silk/control_end_blue.png"/>
		<select class="pagesize">
			<option selected="selected"  value="10">10</option>
			<option value="20">20</option>
			<option value="30">30</option>
			<option  value="40">40</option>
		</select>
		
	</form>
	</div>
    <table id="blog_author_table" cols="4" class="listHier speciallistHier">
		<thead>
		<tr>
			<th width="20%">${blog_author_label}</th>
			<th width="10%">${posts}</th>
			<th width="20%">${dateOfLastPostHeader}</th>
			<th width="50%">${blog_number_of_comments_label}</th>
		</tr>
		</thead>
		<tbody>
		{for m in authors}
		<tr>
			<td><img src="/library/image/silk/user.png" width="16" height="16" alt="User"/>&nbsp;<a href="javascript:;" onclick="switchState('userPosts',{userId:'${m.userId}'});" rel="/direct/profile/${m.userId}/formatted" class="showPostsLink">${m.userDisplayName}</a></td>
			<td>${m.numberOfPosts}</td>
			<td>{if m.dateOfLastPost > 0}${new Date(m.dateOfLastPost).toLocaleString()}{else}n/a{/if}</td>
			<td>${m.numberOfComments}</td>
		</tr>
		{/for}
		</tbody>
	</table>
-->
</div>

<div id="blog_post_page_content_template" style="display:none"><!--
	<a id="blog_user_posts_link" href="javascript:;">${creatorDisplayName}'s Posts</a>
	<div id="post_${id}" style="width:100%"></div>
-->
</div>

<div id="blog_post_template" style="display:none"><!--
	<div class="postOuterContainer">
		<div class="postInnerContainer">
			<span class="postOptionsPanel">
			{if blogCurrentUserPermissions.commentCreate && commentable}
				<a href="#" title="${blog_comment_on_post_tooltip}" onClick="switchState('createComment',{postId: '${id}'});"><img src="/library/image/silk/comment_add.png" width="16" height="16" alt="Add Comment"/></a>&nbsp;
			{/if}
			{if blogCurrentUserPermissions.postDeleteAny || (blogCurrentUserPermissions.postDeleteOwn && creatorId == blogCurrentUser.id)}
				<a href="#" title="${blog_delete_post_tooltip}" onclick="return BlogUtils.recyclePost('${id}');"><img src="/library/image/silk/cross.png" width="16" height="16" alt="Delete"/></a>&nbsp;
			{/if}
			{if blogCurrentUserPermissions.postUpdateAny || (blogCurrentUserPermissions.postUpdateOwn && creatorId == blogCurrentUser.id)}
				<a href="#" onClick="switchState('createPost',{postId:'${id}'});" title="${blog_edit_post_tooltip}"><img src="/library/image/silk/pencil.png" width="16" height="16" alt="Edit"/></a>&nbsp;
			{/if}
			</span>
			<div class="author">
				<span>${creatorDisplayName}</span><br /><span style="font-size: smaller;font-style: italic;">Created:</span><span style="font-size: smaller;font-style: italic;">${new Date(createdDate).toLocaleString()}</span><br/><span style="font-size: smaller;font-style: italic;">Modified:</span><span style="font-size: smaller;font-style: italic;">${new Date(modifiedDate).toLocaleString()}</span>
			</div>
			<br/>
			<br/>
			<div class="title">
				<span>
					<a href="#" onclick="switchState('post',{'postId':'${id}'});" title="${blog_view_post_tooltip}"><span>${title}</span></a>
				</span>
				{if private}
				<img src="/library/image/silk/key.png" title="${blog_private_post_tooltip}" width="16" height="16"/>
				{/if}
			</div>

			<div class="content">${content}</div>

			<br />

			<span id="${id}_comments" class="comments">
					{for comment in comments}
					<div class="blog_comment">
						<div style="overflow:auto; margin-bottom: 10px;">
							<div style="float:left; margin-right: 10px;"><img src="/direct/profile/${comment.creatorId}/image" width="50"/></div>
							<div style="float:left;"><span>${comment.creatorDisplayName}</span><br/><span class="blog_comment_date">Created: ${new Date(comment.createdDate).toLocaleString()}</span><br/><span class="blog_comment_date">Modified: ${new Date(comment.modifiedDate).toLocaleString()}</span></div>
						</div>
						<div class="blog_comment_content">${comment.content}</div>
						{if blogCurrentUserPermissions.commentDeleteAny || (blogCurrentUserPermissions.commentDeleteOwn && comment.creatorId == blogCurrentUser.id)}
							<a href="#" onclick="return BlogUtils.deleteComment('${comment.id}');" title="${blog_delete_comment_tooltip}"><img src="/library/image/silk/cross.png" width="16" height="16" alt="Delete Comment"/></a>&nbsp;
						{/if}
						{if blogCurrentUserPermissions.commentUpdateAny || (blogCurrentUserPermissions.commentUpdateOwn && comment.creatorId == blogCurrentUser.id)}
							<a href="#" onClick="switchState('createComment',{postId:'${id}',commentId:'${comment.id}'});" title="${blog_edit_comment_tooltip}"><img src="/library/image/silk/pencil.png" width="16" height="16" alt="Edit Comment"/></a>
						{/if}
					</div>
					{/for}
			</span>
		</div>
	</div>
-->
</div>

<div id="blog_all_posts_template" style="display:none"><!--
	<h2>${blog_worksite_posts_label}</h2>
	{if posts.length <= 0}
	<div id="noPostsLabel"><span>${noPosts}</span></div>
	{else}
	<div style="clear: left; margin-top: 10px;" id="viewOptions">
   		<input type="checkbox" onclick="toggleFullContent(this);"/>
		<span>${blog_show_title_only_label}</span>
   	</div>
	{/if}
    <div id="postsWrapper">
    	<br />
  	 	<div id="posts">
	  	    <table class="tableHeader">
				<tbody>
					{for post in posts}
					<tr>
						<td>
							<div id="post_${post.id}"></div>
						</td>
					</tr>
					{/for}
				</tbody>
			</table>
		</div>
	</div>
-->
</div>

<div id="blog_user_posts_template" style="display:none"><!--
	<div id="blog_author_profile"></div>
	{if posts.length <= 0}
	<div id="noPostsLabel"><span>${noPosts}</span></div>
	{else}
	<div style="clear: left; margin-top: 10px;" id="viewOptions">
   		<input type="checkbox" onclick="toggleFullContent(this);"/>
		<span>${blog_show_title_only_label}</span>
   	</div>
	{/if}
    <div id="postsWrapper">
    	<br />
  	 	<div id="posts">
	  	    <table class="tableHeader">
				<tbody>
					{for post in posts}
					<tr>
						<td>
							<div id="post_${post.id}"></div>
						</td>
					</tr>
					{/for}
				</tbody>
			</table>
		</div>
	</div>
-->
</div>

<div id="blog_recycled_posts_template" style="display:none"><!--
	<h2>${blog_recycle_bin_label}</h2>
	<div id="noPostsLabel"><span>${noPosts}</span></div>
    <div id="postsWrapper">
    
    	<input type="button" id="blog_really_delete_button" value="${del}"/>
    	<input type="button" id="blog_restore_button" value="${restore}"/>
  	    
  	 	<div id="posts">
  	    <table class="tableHeader">
		<tbody>
			{for post in posts}
			<tr>
				<td valign="top" width="20px"><input type="checkbox" id="${post.id}" class="blog_recycled_post_checkbox"/></td>
				<td>
					<div id="post_${post.id}"></div>
				</td>
			</tr>
			{/for}
		</tbody>
		</table>
		</div>
	</div>
	</div>
-->
</div>

<div id="blog_posts_print_template" style="display:none"><!--
    <div id="postsWrapper">
    	<br />
  	 	<div id="posts">
	  	    <table class="tableHeader">
				<tbody>
					{for post in posts}
					<tr>
						<td>
							<div id="post_${post.id}" style="width:100%"></div>
						</td>
					</tr>
					{/for}
				</tbody>
			</table>
		</div>
	</div>
-->
</div>

<div id="blog_preferences_template" style="display:none"><!--
<h2>${blog_preferences_label}</h2>
<fieldset id="blog_email_preferences_fieldset">
<legend>${blog_email_alerts_label}</legend>
<input id="blog_email_option_never_checkbox" class="blog_email_option" type="radio" name="emailPreference" value="never"/>${blog_email_never_label}
<br />
<input id="blog_email_option_each_checkbox" class="blog_email_option" type="radio" name="emailPreference" value="each"/>${blog_email_each_label}
<br />
<input id="blog_email_option_digest_checkbox" class="blog_email_option" type="radio" name="emailPreference" value="digest"/>${blog_email_digest_label}
<br />
</fieldset>
<br />

<input id="blog_preferences_save_button" type="button" value="${save}"/>
<input type="button" value="${cancel}" onclick="return switchState('home');"/>
</form>
-->
</div>

	<!--
	{if posts.length <= 0}
	<div id="noPostsLabel"><span>${noPosts}</span></div>
	{/if}
	-->

<!--  Templates End -->

<script type="text/javascript" src="js/blog.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery.cluetip.css" />

</body>
</HTML>
